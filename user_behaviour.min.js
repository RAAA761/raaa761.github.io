function StatisticsSenderBase(){this.send=function(){this._isNeedToSend()&&this._isApplicableForPage()&&this._sendInternal()},this._isNeedToSend=function(){throw"Abstract method call"},this._isApplicableForPage=function(){throw"Abstract method call"},this._sendInternal=function(){throw"Abstract method call"}}function FvdOnlineServicePageEnterStatisticsSender(e,i,o){this.__proto__=new StatisticsSenderBase,this._isApplicableForPage=function(){return-1!==window.location.toString().indexOf("/web_video_downloader/")},this._isNeedToSend=function(){return o.IsNeedToSend},this._sendInternal=function(){var t=i.GetUserId(),n=initializeEventData();n.path=document.location.pathname,n.country="unknown",e.getCountry(function(e){e.success&&(n.country=e.countryCode),o.SendData(t,"fvd_online_service_page_enter",n)})}}function initializeEventData(){return{browserName:$.browser.name,browserVersion:$.browser.version,userAgent:navigator.userAgent}}function GeoIpClient(){this.getCountry=function(t){$.ajax({type:"GET",url:"https://geoip.freemake.com/geoip.php",timeout:3e3}).done(function(e){t({success:!0,countryCode:e})}).fail(function(){t({success:!1})})}}function SessionFlag(e){var n=e+"SessionFlag";this.setted=function(){return null!=$.cookie(n)},this.set=function(){var e=new Date,t=new Date(e.getTime()+36e5);document.cookie=n+"= true; path=/; expires="+t.toUTCString()},this.setted()&&this.set()}function GetStatisticConfig(e,t){var n="https://analytics.freemake.com/api/v1.0/EnvironmentEvents/config";"localhost"!==e&&"staging-cdn.freemake.com"!==e&&"staging-dev-site.freemake.com"!==e||(n="https://staging-analytics.freemake.com/api/v1.0/EnvironmentEvents/config");var i={isNeedToSend:!0};$.ajax({url:n,timeout:500,success:function(e){e&&e.hasOwnProperty("HarvestAllow")?i.isNeedToSend=e.HarvestAllow:i.isNeedToSend=!1,t(i)},error:function(){t(i)}})}function StatisticsApiClient(e,t){var s="https://analytics.freemake.com/api/v1.0/SiteEvents";"localhost"!==e&&"staging-cdn.freemake.com"!==e&&"staging-dev-site.freemake.com"!==e||(s="https://staging-analytics.freemake.com/api/v1.0/SiteEvents"),this.IsNeedToSend=t.isNeedToSend,this.SendData=function(e,t,n,i){var o=JSON.stringify({guid:e,category:"site_user_behaviour",event:t,data:n});$.post({url:s,contentType:"application/json",data:o}).done(function(){void 0!==i&&i()})}}function SessionIdProvider(){var t=/^[a-fA-F0-9]{8}\-[a-fA-F0-9]{4}\-[a-fA-F0-9]{4}\-[a-fA-F0-9]{4}\-[a-fA-F0-9]{12}$/;function n(){return $.cookie("siteSessionId")}this.SaveSessionId=function(){this.UpdateActionTime();var e=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}(),t=new Date,n=t.getTime();n+=54e5,t.setTime(n),document.cookie="siteSessionId="+e+"; expires="+t.toUTCString()+"; path=/"},this.UpdateActionTime=function(){var e=new Date,t=new Date(e.getTime());$.cookie("actionTime",t,{expires:1825,path:"/"})},this.GetSessionId=function(){return this.IsSessionIdExists()?n():null},this.IsSessionIdExists=function(){var e=n();return void 0!==e&&t.test(e)}}function GoogleAnalyticsSender(e){this.sendPageViewEvent=function(){var e,t,n,i,o,s;!function(){var e="G-3QP3KG32DZ",t=document.createElement("script");function n(){dataLayer.push(arguments)}t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=".concat(e),window.dataLayer=window.dataLayer||[];var i=composeCustomDimensions();t.onload=function(){n("js",new Date),n("config",e,{dimension1:i.dimension1,dimension2:i.dimension2,dimension3:i.dimension3,dimension4:i.dimension4,user_id:i.dimension1})},document.getElementsByTagName("head")[0].appendChild(t)}(),null!==document.querySelector('[src*="analytics.js"]')||(e=window,t=document,n="script",i="ga",e.GoogleAnalyticsObject=i,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,o=t.createElement(n),s=t.getElementsByTagName(n)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)),ga("create",{trackingId:"UA-45834056-59",cookieDomain:"auto",name:"seamlessTracker"}),ga("seamlessTracker.send","pageview"),ga("seamlessTracker.send",{hitType:"event",eventCategory:"Site events",eventAction:"pageview",eventLabel:document.location.pathname}),gtag("event","pageview",{eventCategory:"Site",eventLabel:document.location.pathname})}}function InitializeInternal(e){var t=new SessionIdProvider,n=new StatisticsApiClient(location.hostname,e),i=new GeoIpClient;userIdProvider.IsUserIdExists()||userIdProvider.SaveUserId(),t.IsSessionIdExists()||t.SaveSessionId(),new FvdOnlineServicePageEnterStatisticsSender(i,userIdProvider,n).send(),new GoogleAnalyticsSender(userIdProvider).sendPageViewEvent()}$(document).ready(function(){GetStatisticConfig(location.hostname,InitializeInternal)});